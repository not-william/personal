{"remainingRequest":"/Users/william/code/personal/client/node_modules/babel-loader/lib/index.js!/Users/william/code/personal/client/node_modules/eslint-loader/index.js??ref--13-0!/Users/william/code/personal/client/src/store/auth.js","dependencies":[{"path":"/Users/william/code/personal/client/src/store/auth.js","mtime":1604957688223},{"path":"/Users/william/code/personal/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/william/code/personal/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/william/code/personal/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3dpbGxpYW0vY29kZS9wZXJzb25hbC9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgdG9rZW46IG51bGwsCiAgICB1c2VyOiBudWxsCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNFVF9VU0VSOiBmdW5jdGlvbiBTRVRfVVNFUihzdGF0ZSwgZGF0YSkgewogICAgICBzdGF0ZS51c2VyID0gZGF0YTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHNpZ25JbjogZnVuY3Rpb24gc2lnbkluKF9yZWYsIGNyZWRlbnRpYWxzKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCd0b2tlbi8nLCBjcmVkZW50aWFscyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdhdHRlbXB0JywgcmVzcG9uc2UuZGF0YS5hY2Nlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYXR0ZW1wdDogZnVuY3Rpb24gYXR0ZW1wdChfcmVmMiwgdG9rZW4pIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgdG9rZW4pOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldCgndXNlcnMvbWUvJywgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlbgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZhaWxlZCcpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzIsIDldXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/william/code/personal/client/src/store/auth.js"],"names":["axios","namespaced","state","token","user","mutations","SET_TOKEN","SET_USER","data","actions","signIn","credentials","dispatch","post","response","access","attempt","commit","get","headers","console","log"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAGbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE,IADF;AAELC,IAAAA,IAAI,EAAE;AAFD,GAHM;AAQbC,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACEJ,KADF,EACSC,KADT,EACgB;AACvBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD,KAHQ;AAKTI,IAAAA,QALS,oBAKCL,KALD,EAKQM,IALR,EAKc;AACrBN,MAAAA,KAAK,CAACE,IAAN,GAAaI,IAAb;AACD;AAPQ,GARE;AAkBbC,EAAAA,OAAO,EAAE;AACDC,IAAAA,MADC,wBACoBC,WADpB,EACiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxBC,gBAAAA,QAAwB,QAAxBA,QAAwB;AAAA;AAAA,uBACjBZ,KAAK,CAACa,IAAN,CAAW,QAAX,EAAqBF,WAArB,CADiB;;AAAA;AAClCG,gBAAAA,QADkC;AAGtCF,gBAAAA,QAAQ,CAAC,SAAD,EAAYE,QAAQ,CAACN,IAAT,CAAcO,MAA1B,CAAR;;AAHsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIvC,KALM;AAODC,IAAAA,OAPC,0BAOoBb,KAPpB,EAO2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAjBc,gBAAAA,MAAiB,SAAjBA,MAAiB;AAChCA,gBAAAA,MAAM,CAAC,WAAD,EAAcd,KAAd,CAAN;AADgC;AAAA;AAAA,uBAITH,KAAK,CAACkB,GAAN,CAAU,WAAV,EAAuB;AAC1CC,kBAAAA,OAAO,EAAE;AACP,qCAAiB,YAAYhB;AADtB;AADiC,iBAAvB,CAJS;;AAAA;AAI1BW,gBAAAA,QAJ0B;AAU9BG,gBAAAA,MAAM,CAAC,UAAD,EAAaH,QAAQ,CAACN,IAAtB,CAAN;AAV8B;AAAA;;AAAA;AAAA;AAAA;AAY9BY,gBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AAZ8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcjC;AArBM;AAlBI,CAAf","sourcesContent":["import axios from 'axios'\n\nexport default {\n  namespaced: true,\n\n  state: {\n    token: null,\n    user: null,\n  },\n\n  mutations: {\n    SET_TOKEN (state, token) {\n      state.token = token\n    },\n\n    SET_USER (state, data) {\n      state.user = data\n    }\n  },\n\n  actions: {\n    async signIn ({ dispatch}, credentials) {\n      let response = await axios.post('token/', credentials)\n\n      dispatch('attempt', response.data.access)\n    },\n\n    async attempt ({ commit }, token) {\n      commit('SET_TOKEN', token)\n\n      try {\n        let response = await axios.get('users/me/', {\n          headers: {\n            'Authorization': 'Bearer ' + token\n          }\n        })\n\n        commit('SET_USER', response.data)\n      } catch (e) {\n        console.log('failed')\n      }\n    }\n  },\n}"]}]}